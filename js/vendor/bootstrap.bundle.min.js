// Lightweight Bootstrap Modal shim to support basic show/hide used in this app
// Not a full Bootstrap implementation â€” only provides Modal constructor, getInstance, and basic event hooks.
(function(window, document){
  if (!window.bootstrap) window.bootstrap = {};
  if (window.bootstrap.Modal) return; // don't override real bootstrap

  function Modal(el, options) {
    if (!el) return null;
    this._el = el;
    this._options = options || {};
    // store instance
    try { el.__bootstrapModalInstance = this; } catch(e) {}
  }

  Modal.prototype.show = function(){
    var el = this._el;
    if (!el) return;
    el.style.display = 'block';
    el.classList.add('show');
    el.removeAttribute('aria-hidden');
    // set backdrop if missing
    try{
      if (!document.querySelector('.modal-backdrop')){
        var bd = document.createElement('div'); bd.className = 'modal-backdrop fade show'; document.body.appendChild(bd);
      }
    }catch(e){}
    // try to focus close button
    var close = el.querySelector('[data-bs-dismiss], .btn-close');
    if (close && typeof close.focus === 'function') close.focus();
  };

  Modal.prototype.hide = function(){
    var el = this._el;
    if (!el) return;
    el.style.display = 'none';
    el.classList.remove('show');
    el.setAttribute('aria-hidden', 'true');
    // remove backdrop
    try{
      var bd = document.querySelectorAll('.modal-backdrop');
      bd.forEach(function(n){ n.parentNode && n.parentNode.removeChild(n); });
    }catch(e){}
  };

  Modal.getInstance = function(el){
    return el && el.__bootstrapModalInstance ? el.__bootstrapModalInstance : null;
  };

  window.bootstrap.Modal = Modal;
})(window, document);
